% rubber: set program xelatex
\documentclass{article}

% --------
% Packages
% --------

\usepackage{calc}
\usepackage{fontawesome}
\usepackage{fullpage}

% Colors
\usepackage[dvipsnames]{xcolor}

%% Custom colors
\definecolor{DarkGray}{gray}{0.4}

%% Semantic colors
\newcommand{\titlecolor}{purple}
\newcommand{\accentcolor}{DarkGray}
\newcommand{\sectioncolor}{Violet}

% Headers and footers
\usepackage{fancyhdr}
\pagestyle{fancy}

%% HF contents
\fancyhf{}
\lhead{
    \color{\titlecolor}
    {\LARGE\bfseries Emily Ng} \hrulefill \\
    \color{\accentcolor}
    \phone \hfill \email \hfill \github
    \color{black}
}
\rhead{
    \color{\accentcolor}
    \address\\~\\
    \color{black}
}
\lfoot{
    \color{\accentcolor}
    \phone \hfill \email \hfill \github
    \color{black}
}

%% HF sizing
\addtolength{\voffset}{-0.5in}       % reduce top margin = 1 in + \voffset
\renewcommand{\headheight}{60pt}     % header height, default 12pt
\renewcommand{\headsep}{10pt}        % head to text separation, default 25pt
\renewcommand{\headrulewidth}{0pt}   % no rule under header
\renewcommand{\marginparwidth}{48pt} % margin notes

% Section title style
\usepackage{titlesec}
\titleformat{\section}[runin]
    {\Large\bfseries\color{\sectioncolor}}{\thesection}{0pt}
    {\rule{\the\myleft+\the\gutterwidth}{0pt}}[ \hrulefill]

% List styles
\usepackage{enumitem}
\SetLabelAlign{myright}{\strut\smash{\parbox[t]{\labelwidth}{\raggedleft#1}}}
\newlist{cvlist}{description}{1}
\setlist[cvlist]{style=multiline,align=myright,labelwidth=\the\myleft,
    labelsep=\the\gutterwidth,leftmargin=!}

%% item macro
%   <year> <item> <short description>
\newcommand{\cvitem}[3]{\item[#1] \textbf{#2} \\ \textsl{#3}}
\newcommand{\cvitemcompact}[3]{\item[#1] \itab{\textbf{#2}} \tab{\textit{#3}}}

%% MS Word like tab alignment
\newcommand{\itab}[1]{\hspace{0em}\rlap{#1}}
\newcommand{\tab}[1]{\hspace{.3\textwidth}\rlap{#1}}

% Tikz
\usepackage{tikz}
%% Draws text on a coloured, rounded rectangle.
\newcommand*\rectangled[1]{\tikz[baseline=(char.base)]{
    \node[shape=rectangle,fill=\sectioncolor,inner sep=2.4pt,rounded corners=4pt]
    (char) {\color{white}\small\textbf{#1}};
}}

% Lipsum
\usepackage{lipsum}
\setlipsumdefault{1}

% Font
\renewcommand{\familydefault}{\sfdefault}

% Main backbone placement
\newlength{\gutterwidth}
\setlength{\gutterwidth}{1em}

\newlength{\myleft}
\setlength{\myleft}{1cm}

% ---------------------
% User defined commands
% ---------------------

% Contact info
\newcommand{\email}{\faEnvelope \, ngemily2@gmail.com }
\newcommand{\phone}{\faPhone \, +1-647-123-4567 }
\newcommand{\github}{\faGithub \, ngemily}
\newcommand{\address}{40 St. George St. \\ Toronto, ON \\ M5S 2E4}

\IfFileExists{tex/contact}{\input{tex/contact}}{} % Replaces dummy data

% CV section
%   [color] <section name>
\newcommand{\cvsection}[2][black]{
    \renewcommand{\sectioncolor}{#1}
    \section*{#2}
}

% Vertical overlap
\newcommand{\tlap}[1]{\mbox{\vbox to 0pt{\vss\hbox{#1}}}}
\newcommand{\blap}[1]{\mbox{\vbox to 0pt{\hbox{#1}\vss}}}

% --------
% Document
% --------

\begin{document}

\cvsection[NavyBlue]{Education}

\begin{cvlist}
    \cvitem{2016}{University of Toronto}{\textnormal{BA.Sc. in Engineering
    Science Major in Electrical and Computer Engineering}}
\end{cvlist}

\cvsection[OliveGreen]{Work}

\begin{cvlist}
    \input{yaml/altera}
    % \cvitem{2015}
    % {Altera}{IP \& Device Software}
    %     \blap{\llap{\makebox[2em + \widthof{Verilog} + \widthof{IP \& Device Software}][l]{
    %         \shortstack[r]{
    %             \rectangled{Verilog} \\
    %             \rectangled{C++} \\
    %             \rectangled{Quartus}
    %         }
    %     }}}

    %     \input{yaml/altera}
    \input{yaml/purpose}
    \input{yaml/penyopal}
\end{cvlist}

\cvsection[RedOrange]{Extra-curriculars}

\begin{cvlist}[noitemsep]
    \cvitemcompact{2016}{University Bouldering Series}
        {Indoor rock climbing inter-university competition.}

    \cvitemcompact{2014}{Iron Sports}{Powerlifiting society.}

    \cvitemcompact{2013}{Iron Dragons}{Dragon boat team representing UofT}

    \cvitemcompact{2012}{Hacker Academy}{Technology and programming society.}

\end{cvlist}

\cvsection[Blue]{Projects}

\begin{cvlist}
    \input{yaml/detectinator}
    \input{yaml/cpu}
\end{cvlist}

\cvsection[Green]{Skills}

\begin{itemize}
    \item skill 1
    \item skill 2
\end{itemize}

\end{document}
